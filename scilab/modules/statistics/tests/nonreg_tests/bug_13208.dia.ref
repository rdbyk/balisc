x = 0:10;
y = 20:30;
[a1, b1] = reglin(x, [x ; y]);
y(2:10) = %nan;
[a2, b2] = nanreglin(x, [x ; y]);
assert_checkequal([a1 b1], [a2 b2]);
x = 0:2;
y = [0 3 0];
[a, b] = reglin(x, [x ; y]);
assert_checkequal(a, [1 ; 0]);
assert_checkequal(b, [0 ; 1]);
y2 = y;
y2(2) = %nan;
[a, b] = nanreglin(x, [x ; y2]);
assert_checkequal(a, [1 ; 0]);
assert_checkequal(b, [0 ; 0]);
x = 1:3;
y = 1:3;
refMsg = msprintf(_("%s: No NaNs detected, please use %s() instead.\n"), "nanreglin", "reglin");
assert_checkerror("[a, b] = nanreglin(x, [x ; y])", refMsg);
y = [1 %nan 3];
refMsg = msprintf(_("%s: NaNs detected, please use %s() instead.\n"), "reglin", "nanreglin");
assert_checkerror("[a, b, sig] = reglin(x, [x ; y])", refMsg);
